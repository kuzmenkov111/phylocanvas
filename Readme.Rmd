---
title: "Phylocanvas Basics"
author: "zachcp"
date: "11/7/2016"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# an htmlwidget for phylocanvas JS 

## Installation

```{r, eval=FALSE}
devtools::install_github("zachcp/phylocanvas")
```

## Basic Usage

Use phylocanvas to draw phylogenetic trees. Basic options to control the tree are availalbe in this top level function. The tree shape in controlled by the `treetype` option. Try 'radial' and 'heirarchical' as well.

```{r, message=FALSE}
library(phylocanvas)
library(dplyr)
phylocanvas("(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5)F;", treetype = "rectangular", alignlabels = T)
```

```{r}
phylocanvas("(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5)F;", treetype = "circular", nodesize = 30, linewidth = 10)
```

## Stylize nodes

Node styling options are available. Most of the appearance of a node can be changed here. Note below that colors can be either colornames, rgb strings or hex strings.

```{r}
# Note that colors are names, rgbs or hex
phylocanvas("(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5)F;") %>%
  style_node("A", nodesizeratio = 4, fillcolor="rgb(0, 255, 0)") %>% 
  style_node("B", fillcolor = "blue") %>%
  style_node("C", labeltextsize = 10, shape="triangle") %>%
  style_node("D", fillcolor="#ffa500", highlighted=TRUE) 
```

## Collapse Nodes

```{r}
# Note that colors are names, rgbs or hex
phylocanvas("(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5)F;") %>%
  collapse_node("E")

```


## Use Plugins

Phylocanvas has a nubmer of different plugins that extend the basic tree. These include pluings ofr [metadata](https://github.com/phylocanvas/phylocanvas-plugin-metadata), [scale bars](https://github.com/phylocanvas/phylocanvas-plugin-scalebar), [svg export](https://github.com/phylocanvas/phylocanvas-plugin-export-svg), [context menu on the mouse](https://github.com/phylocanvas/phylocanvas-plugin-context-menu), and [history](https://github.com/phylocanvas/phylocanvas-plugin-history). We will try to add as many as reasonable. Currently this htmlwidget sis based on the [phylocanvas-quickstart](https://github.com/phylocanvas/phylocanvas-quickstart) so we can activate the history, context, scale, and metadata features.

```{r}
# Note the scalebar is active
phylocanvas("(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5)F;", showscalebar = TRUE)
```


## Roadmap
Not expecting 1:1 parity with the pure JS version. The goal is to expose the basic styling and sizing to allow easy tree drawing within R.  Possibly, to use the metadata plugin for heatmap displays
and ideally (don't know how hard this will be) allow drag and drop selection for returnign sequence 
names into shiny.

## Reference
The sourcecode for the phylocanvas htmltools package can be found at the [github repo](https://github.com/zachcp/phylocanvas). For more information about the phylocanvas JavaScript library, check out the [phylocanvas website](http://phylocanvas.org).

